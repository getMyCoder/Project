<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style type="text/css">
        body {margin: 0;padding: 0;font-family: '微软雅黑'}
        pre{font-size: 16px}
    </style>
</head>
<body>
<pre>
        var data = [
            {id: 0, text: 'list-1', subId: -1, drapFlage: false},
            {id: 1, text: 'list-2', subId: -1, drapFlage: false},
            {id: 2, text: 'list-3', subId: -1, drapFlage: false},
            {id: 3, text: 'list-1-1', subId: 0, drapFlage: true},
            {id: 4, text: 'list-1-2', subId: 0, drapFlage: true},
            {id: 5, text: 'list-1-3', subId: 0, drapFlage: true},
            {id: 6, text: 'list-2-1', subId: 1, drapFlage: true},
            {id: 7, text: 'list-2-2', subId: 1, drapFlage: true},
            {id: 8, text: 'list-2-3', subId: 1, drapFlage: true},
            {id: 9, text: 'list-3-1', subId: 2, drapFlage: true},
            {id: 10, text: 'list-3-2', subId: 2, drapFlage: false},
            {id: 11, text: 'list-3-3', subId: 2, drapFlage: true},
            {id: 12, text: 'list-3-2-1', subId: 10, drapFlage: true},
            {id: 13, text: 'list-3-2-2', subId: 10, drapFlage: false},
            {id: 14, text: 'list-3-2-3', subId: 10, drapFlage: true},
            {id: 15, text: 'list-3-2-2-1', subId: 13, drapFlage: true},
            {id: 16, text: 'list-3-2-2-2', subId: 13, drapFlage: true},
            {id: 17, text: 'list-3-2-2-3', subId: 13, drapFlage: true}
        ];
        treeDom(treeList(data));
        // 数列表
        function treeList(list) {
            var createArray = [];
            // 列表循环查找父级
            for (var i = 0; i < list.length; i++) {
                if (list[i].subId == -1) {
                    createArray.push(list[i]);
                }
            }
            // 循环查找、添加从属级别
            for (var k = 0; k < createArray.length; k++) {
                setloop(createArray[k]);
            }
            function setloop(cellData) {
                for (var j = 0; j < list.length; j++) {
                    flage = false;
                    if (cellData.id == list[j].subId) {
                        if (!cellData.children) {
                            cellData.children = [];
                        }
                        setloop(list[j]);
                        cellData.children.push(list[j]);
                    }
                }
            }
            return createArray;
        }
</pre>
</body>
</html>